<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Profile</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">

    <link href="../../css/bootstrap.min.css" rel="stylesheet">

    <link href="../../css/mdb.min.css" rel="stylesheet">

    <link href="../../css/style.css" rel="stylesheet">
    <style type="text/css">
        html,
        body,
        header,
        .carousel {
            height: 60vh;
        }

        @media (max-width: 740px) {

            html,
            body,
            header,
            .carousel {
                height: 100vh;
            }
        }

        @media (min-width: 800px) and (max-width: 850px) {

            html,
            body,
            header,
            .carousel {
                height: 100vh;
            }
        }

        @media (min-width: 800px) and (max-width: 850px) {
            .navbar:not(.top-nav-collapse) {
                background: #929FBA !important;
            }
        }
    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script>
        $(document).ready(function () {

            var tok = localStorage.getItem('token');
            /// Dashboard creation
            $.ajax({
                type: 'get',
                url: 'http://localhost:8080/users',
                beforeSend: function (xhr) {
                    if (tok) {
                        xhr.setRequestHeader('Authorization', 'Bearer ' + tok);
                    }
                },
                success: function (data) {
                    $('#stage').append(
                        '<p class="mx-3 ml-5"><i class="fas fa-user-circle prefix grey-text mr-1"></i> <label for="name">' + data.fullname + '</label></p>' +
                        '<p class="mx-3 mt-4 ml-5"><i class="fas fa-envelope prefix grey-text mr-1"></i> <label for="email">' + data.email + '</label></p>' +
                        '<p class="mx-3 mt-4 ml-5"><i class="fas fa-phone prefix grey-text mr-1"></i> <label for="phone">' + data.phone + '</label></p>' +
                        '<p class="mx-3 mt-4 ml-5"><i class="fas fa-map-marker-alt prefix grey-text mr-1"></i> <label for="address">' + data.address + '</label></p>'
                    );
                },
                error: function () {
                    alert("Sorry, please login your id.");
                }
            });

            // For Logging Out

            $("#logout").click(function () {
                $.ajax({
                    type: 'post',
                    url: 'http://localhost:8080/users/logout',
                    beforeSend: function (xhr) {
                        if (tok) {
                            xhr.setRequestHeader('Authorization', 'Bearer ' + tok);
                        }
                    },
                    success: function (data) {
                        $('#stage').append(
                            '<p class="mx-3 ml-5"><i class="fas fa-user-circle prefix grey-text mr-1"></i> <label for="name">' + data.fullname + '</label></p>' +
                            '<p class="mx-3 mt-4 ml-5"><i class="fas fa-envelope prefix grey-text mr-1"></i> <label for="email">' + data.email + '</label></p>' +
                            '<p class="mx-3 mt-4 ml-5"><i class="fas fa-phone prefix grey-text mr-1"></i> <label for="phone">' + data.phone + '</label></p>' +
                            '<p class="mx-3 mt-4 ml-5"><i class="fas fa-map-marker-alt prefix grey-text mr-1"></i> <label for="address">' + data.address + '</label></p>'
                        );
                    },
                    error: function () {
                        alert("Sorry, please login your id.");
                        location.href = "../../index.html";
                    }
                });
            })

            // For Logging Out

            $("#logout").click(function () {
                $.ajax({
                    type: 'post',
                    url: 'http://localhost:8080/users/logout',
                    beforeSend: function (xhr) {
                        if (tok) {
                            xhr.setRequestHeader('Authorization', 'Bearer ' + tok);
                        }
                    },
                    success: function (data) {
                        alert("You are logged out.");
                        location.href = "../../index.html";
                    },
                    error: function () {
                        alert("Sorry, not logged in !.");
                        location.href = "../../index.html";
                    }
                });
            })
        });  
    </script>

</head>

<body>
    <header>
        <nav class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar">
            <div class="container">
                <a class="navbar-brand" href="homepage.html">
                    <strong>Hostel Booking Management System</strong>
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse"
                    data-target="#navbarSupportedContent-7" aria-controls="navbarSupportedContent-7"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent-7">
                    
                
                    <ul class="navbar-nav ml-auto">

                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink-333" data-toggle="dropdown"
                                aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-user"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right dropdown-default"
                                aria-labelledby="navbarDropdownMenuLink-333">
                                <a href="profile.html">
                                    <option value="">Profile</option>
                                </a>
                                <a href="#" id="logout">
                                    <option value="">logout</option>
                                </a>
                            </div>
                        </li>

                    </ul>
                </div>

            </div>
        </nav>
        <!-- Navbar -->

        <div class="view"
            style="background-image: url('../../img/girls1.jpg'); background-repeat: no-repeat; background-size: cover;">

            <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

                <div class="text-center white-text mx-5 wow fadeIn">
                    <h1 class="mb-4">
                        <strong>Hostel Booking Management System</strong>
                    </h1>

                    <p>
                        <strong><h3>HOSTEL by BED</h3>
                            <h4>"better than a hostel, cheaper than a hotel"</h4></strong>
                    </p>

                    <p class="mb-4 d-none d-md-block">
                        <strong>We met here real friends. Everytime since 5 years it is like coming home. Good Feeling is not a hostel - It is a lifestyle!</strong>
                    </p>
                </div>
            </div>
        </div>





    </header>

    <div class="container">
        <!--Content-->
        <section class="text-center">

            <!--Grid row-->
            <div class="row wow fadeIn">

                <!--Grid column-->
                <div class="col-lg-3 col-md-6 mb-4">

                    <!--Card-->
                    <div class="card text-center profile" >
                        <div class="profile-image">
                            <img src="../../img/user.png" alt="" class="profile-image">
                        </div>
                        <div class="col-sm-7 profile-detail text-justify pr-5 pl-5" id="stage">

                        </div>
                        <hr>
                        <div>
                            <button class="btn btn-login" id="logout">Logout</button>
                        </div>

                    </div>
                    <!--Card-->

                </div>
                <!--Grid column-->
            </div>

        </section>
        <!--Section: Products v.3-->
    </div>
    <!--/.Content-->


    </div>


    <footer class="page-footer text-center font-small mt-4 wow fadeIn">
        <!-- Social icons -->
        <div class="p-2 footer-social">
            <a href="" target="_blank">
                <i class="fab fa-facebook-f mr-3"></i>
            </a>

            <a href=" target=" _blank">
                <i class="fab fa-twitter mr-3"></i>
            </a>

            <a href="" target="_blank">
                <i class="fab fa-instagram mr-3"></i>
            </a>

        </div>
        <!-- Social icons -->

        <!--Copyright-->
        <div class=" py-3 footer-copy">
            Â© 2020 Copyright: All Rights Reserved DarpanN
            <a href="https://mdbootstrap.com/education/bootstrap/" target="_blank"> Hostel Booking Management System </a>
        </div>
        <!--/.Copyright-->

    </footer>
    <!--/.Footer-->



    <script type="text/javascript" src="../../js/jquery-3.4.0.min.js"></script>

    <script type="text/javascript" src="../../js/popper.min.js"></script>

    <script type="text/javascript" src="../../js/bootstrap.min.js"></script>

    <script type="text/javascript" src="../../js/mdb.min.js"></script>
</body>

</html>
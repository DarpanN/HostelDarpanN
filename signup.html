<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Hostel Booking Management System</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/mdb.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <script>
        $(document).ready(function () {

            $('#userregister').click(function () {

                var fullname = $("#fullname").val();
                var email = $("#email").val();
                var phone = $("#phone").val();
                var address = $("#address").val();
                var password = $("#password").val();

                if (fullname=="") {
                    alert('Enter your fullname')
                    $("#fullname").focus();

                }
                else if (!fullname.match("^[a-zA-Z ]+$")) {
                    alert('Enter valid name')
                    $("#fullname").focus();
                }
                else if (email=="") {
                    alert('Enter your email')
                    $("#email").focus();
                }
            
                else if (phone == "") {
                    alert('Enter your phone')
                    $("#phone").focus();
                }
                else if (!phone.match("([0-9 + -]+).{7,}")) {
                    alert('Enter valid phone')
                    $("#phone").focus();

                }
                else if (address == "") {
                    alert('Enter your address')
                    $("#address").focus();
                }
                else if (!address.match()) {
                    alert('Enter valid address')
                    $("#address").focus();

                }
                else if (password == "") {
                    alert('Enter your password')
                    $("#password").focus();
                }
                else {


                    data = {
                        'fullname': fullname,
                        'email': email,
                        'phone': phone,
                        'address': address,
                        'password': password
                    }
                    console.log(data);

                    $.ajax({
                        url: 'http://localhost:8080/register',
                        type: 'post',
                        dataType: 'json',
                        data: data,
                        success: function (res, textStatus, xhr) {
                            if (res.msg == "user_exist") {
                                alert("User already exist !")
                            }
                            else if (res.msg == "user_not_exist") {
                                alert("Registered succesfull !")
                                location.href = "login.html"
                            }

                        },
                        error: function (xhr, textStatus, errorThrown) {
                            console.log(xhr);
                            alert(xhr);
                        }
                    });
                }
            });
        });
    </script>
</head>

<body
    style="background-image: url('img/background.png'); background-repeat: no-repeat; background-size: cover; background-position: top center;">

    <header>
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top scrolling-navbar">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <strong>Hostel Booking Management System</strong>
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse"
                    data-target="#navbarSupportedContent-7" aria-controls="navbarSupportedContent-7"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent-7">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="login.html">
                                <img src="img/icons/login.png" style="height:24px" alt=""> <strong>Login</strong>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="signup.html">
                                <img src="img/icons/register.png" style="height:24px" alt="">
                                <strong>Create Account</strong></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="fab fa-facebook-square"></i></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="fab fa-twitter-square"></i></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="fab fa-instagram"></i></a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Full Page Intro -->
        <div class="view">
            <div class="container container-signup">
                <div class="row">

                    <div class="col-sm-8 signup-form">
                        <div class="login-head">
                            <h4 class="modal-title">Create New Account</h4>
                        </div>

                        <div class="modal-body mx-3">
                            <div class="md-form mb-5">
                                <i class="fas fa-user-circle prefix grey-text"></i>
                                <input type="text" id="fullname" required class="form-control">
                                <label data-error="wrong" data-success="right" for="defaultForm-name">Full
                                    Name</label>
                            </div>
                            <div class="md-form mb-5">
                                <i class="fas fa-envelope prefix grey-text"></i>
                                <input type="email" id="email" requiredclass="form-control">
                                <label data-error="wrong" data-success="right" for="email">Your
                                    email</label>
                            </div>
                            <div class="md-form mb-5">
                                <i class="fas fa-phone prefix grey-text"></i>
                                <input type="text" id="phone" required class="form-control" >
                                <label data-error="wrong" data-success="right" for="defaultForm-phone">Phone</label>
                            </div>
                            <div class="md-form mb-5">
                                <i class="fas fa-map-marker-alt prefix grey-text"></i>
                                <input type="text" id="address" required class="form-control">
                                <label data-error="wrong" data-success="right" for="defaultForm-address">Address</label>
                            </div>
                            <div class="md-form mb-5">
                                <i class="fas fa-key prefix grey-text"></i>
                                <input type="password" id="password" required class="form-control">
                                <label data-error="wrong" data-success="right"
                                    for="defaultForm-password">Password</label>
                            </div>

                            <div class="modal-footer d-flex justify-content-center">
                                <button class="btn btn-login" id="userregister">Signup</button>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>


    </header>

    <script type="text/javascript" src="js/jquery-3.4.0.min.js"></script>

    <script type="text/javascript" src="js/bootstrap.min.js"></script>

    <script type="text/javascript" src="js/mdb.min.js"></script>



</body>

</html>